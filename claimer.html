
<!DOCTYPE html>
<html>
<head>
    <style>
    body {
        word-wrap: break-word;
        width: 90%;
    }
    </style>

    <script>
    
    function deleteBlockchain() {
        var xhr = new XMLHttpRequest();
        var url = "http://localhost:5000/v1.1/blockchain";
        xhr.open("DELETE", url, true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                document.getElementById('deleteBlockchain').innerHTML = xhr.responseText;
            }
        };
        xhr.send(null);
    }

    function putBlockchainConnection() {
        var xhr = new XMLHttpRequest();
        var url = "http://localhost:5000/v1.1/blockchain/connection";
        xhr.open("PUT", url, true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                document.getElementById('putBlockchainConnection').innerHTML = xhr.responseText;
            }
        };
        xhr.send(null);
    }

    function getBlockchainConnection() {
        var xhr = new XMLHttpRequest();
        var url = "http://localhost:5000/v1.1/blockchain/connection";
        xhr.open("GET", url, true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4)  { 
                document.getElementById('getBlockchainConnection').innerHTML = xhr.responseText;
            }
        };
        xhr.send(null);
    }

    function postBlockchainConnection() {
        var xhr = new XMLHttpRequest();
        var url = "http://localhost:5000/v1.1/blockchain/connection";
        xhr.open("POST", url, true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                document.getElementById('postBlockchainConnection').innerHTML = xhr.responseText;
            }
        };
        var connectionName = document.getElementById('connectionName').value
        var data = JSON.stringify(connectionName);
        xhr.send(data);
    }

    function postOffchainSubscription() {
        var xhr = new XMLHttpRequest();
        var url = "http://localhost:5000/v1.1/offchain/subscription";
        xhr.open("POST", url, true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                document.getElementById('postOffchainSubscription').innerHTML = xhr.responseText;
            }
        };
        var ip = document.getElementById('ip').value;
        var name = document.getElementById('name').value;
        var pass = document.getElementById('pass').value;
        var data = JSON.stringify({'ip' : ip, 'name' : name, 'pass':pass});
        xhr.send(data);
    }

    function getOffchainCertificateClaim() {    //to be continued
        var xhr = new XMLHttpRequest();
        var url = "http://localhost:5000/v1.1/offchain/certificate/claim";
        xhr.open("POST", url, true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                //var dict = JSON.parse(xhr.responseText);
                //document.getElementById('binaryDiploma').innerHTML = dict['cert'];
                //document.getElementById('hexTransaction').innerHTML = dict['transaction'];
                document.getElementById('binaryDiploma').innerHTML = xhr.responseText;
            }
        };
        var ip = document.getElementById('ip').value;
        var pass = document.getElementById('pass').value;
        var data = JSON.stringify({'ip': ip, 'pass':pass});
        xhr.send(data);
    }

    function putOffchainCertificateClaim() { //to be continued
        var xhr = new XMLHttpRequest();
        var url = "http://localhost:5000/v1.1/offchain/certificate/claim";
        xhr.open("PUT", url, true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                document.getElementById('putOffchainCertificateClaim').innerHTML = xhr.responseText;
            }
        };
        var ip = document.getElementById('ip').value;
        var transaction = document.getElementById('hexToSign').value
        var pass = document.getElementById('pass').value
        var data = JSON.stringify({'ip' : ip, 'transaction' : transaction, 'pass':pass });
        xhr.send(data);
    }
    </script>

</head>

<body>

<h1>The claimer</h1>

<button type="button" onclick="deleteBlockchain()"> DELETE BLOCKCHAIN</button>
<p id="deleteBlockchain"></p>

<button type="button" onclick="postBlockchainConnection()"> POST BLOCKCHAIN CONNECTION</button>
Connection name: <input  type="text" maxlength="512" id="connectionName" value="unichain@192.168.1.12:7315"/>
<p id="postBlockchainConnection"></p>

<button type="button" onclick="putBlockchainConnection()"> PUT BLOCKCHAIN CONNECTION</button>
<p id="putBlockchainConnection"></p>

<button type="button" onclick="getBlockchainConnection()"> GET BLOCKCHAIN CONNECTION</button>
<p id="getBlockchainConnection"></p>


Url: <input  type="text" maxlength="512" id="ip" value="192.168.1.12:5000"/><br/>
Name: <input  type="text" maxlength="512" id="name" value="Jita"/><br/>
Pass: <input  type="text" maxlength="512" id="pass" value="x1"/><br/>

<button type="button" onclick="postOffchainSubscription()"> POST OFFCHAIN SUBSCRIPTION</button>
<p id="postOffchainSubscription"></p>

<button type="button" onclick="getOffchainCertificateClaim()"> GET OFFCHAIN CERIFICATE CLAIM</button>    
<p id="binaryDiploma" item-width="75%"></p>
<p id="hexTransaction" item-width="75%"></p>



<button type="button" onclick="putOffchainCertificateClaim()"> PUT OFFCHAIN CERIFICATE CLAIM</button>
Transaction hex: <input  type="text" maxlength="512" id="hexToSign" value="?????"/>
<p id="putOffchainCertificateClaim"></p>

</body>
</html> 